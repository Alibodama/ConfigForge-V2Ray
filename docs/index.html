<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ConfigForge V2Ray ‚Äî Speed-tested global & country subscriptions</title>

  <!-- SEO -->
  <meta name="description" content="Speed-tested V2Ray subscriptions (VLESS, VMess, Shadowsocks, Trojan). Global & country lists with copy/QR, favorites, search, and caching."/>
  <link rel="canonical" href="https://shatakvpn.github.io/ConfigForge-V2Ray/"/>

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="ConfigForge V2Ray"/>
  <meta property="og:description" content="Speed-tested, ready-to-use subscriptions by country or global."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://shatakvpn.github.io/ConfigForge-V2Ray/"/>
  <meta property="og:image" content="https://opengraph.githubassets.com/1/ShatakVPN/ConfigForge-V2Ray"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <!-- Color schemes -->
  <meta name="color-scheme" content="dark light"/>
  <meta name="theme-color" content="#0b1324" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">

  <!-- Icons (ÿ™ÿ∑ÿ®€åŸÇ ÿ®ÿß ÿ™ŸÖ) -->
  <link rel="icon" media="(prefers-color-scheme: dark)"
        href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop stop-color="%236386fa"/><stop offset="1" stop-color="%237c3aed"/></linearGradient></defs><rect rx="12" width="64" height="64" fill="url(%23g)"/><text x="50%" y="54%" text-anchor="middle" font-family="Inter, Arial" font-weight="700" font-size="28" fill="%23ffffff">CF</text></svg>'>
  <link rel="icon" media="(prefers-color-scheme: light)"
        href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop stop-color="%235a67d8"/><stop offset="1" stop-color="%236b21a8"/></linearGradient></defs><rect rx="12" width="64" height="64" fill="url(%23g)"/><text x="50%" y="54%" text-anchor="middle" font-family="Inter, Arial" font-weight="700" font-size="28" fill="%230b1324">CF</text></svg>'>

  <!-- Fonts / Twemoji -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Emoji&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script>

  <!-- Bootstrap (RTL/LTR ÿ®Ÿá‚ÄåÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© ÿ≥Ÿà€å€å⁄Ü ŸÖ€å‚Äåÿ¥ŸàÿØ) -->
  <link id="bootstrap-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <style>
    /* ========== Theme variables ========== */
    :root{
      --fg:#e2e8f0; --muted:#cbd5e1;
      --card:rgba(255,255,255,.08); --border:rgba(255,255,255,.15);
      --shadow:0 10px 40px rgba(0,0,0,.25);
      --accent1:#3b82f6; --accent2:#7c3aed;
      --logoText:#ffffff;
      --bg:
        radial-gradient(1200px 800px at 20% -10%,rgba(99,102,241,.15),transparent 60%),
        radial-gradient(1000px 600px at 120% 10%,rgba(168,85,247,.12),transparent 60%),
        linear-gradient(180deg,#0b1324,#1e2b3b);
    }
    @media (prefers-color-scheme: light){
      :root{
        --fg:#0f172a; --muted:#475569;
        --card:rgba(255,255,255,.8); --border:rgba(15,23,42,.08);
        --shadow:0 10px 30px rgba(15,23,42,.10);
        --accent1:#3b82f6; --accent2:#7c3aed;
        --logoText:#0b1324;
        --bg:
          radial-gradient(900px 600px at 20% -10%,rgba(59,130,246,.10),transparent 60%),
          radial-gradient(800px 500px at 120% 10%,rgba(124,58,237,.10),transparent 60%),
          linear-gradient(180deg,#ffffff,#f4f7fb);
      }
      .text-bg-secondary#last-updated{color:#0f172a!important; background:#e2e8f0!important}
    }

    *{box-sizing:border-box}
    body{
      background: var(--bg);
      min-height:100vh; color:var(--fg);
      font-family:'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      display:flex; flex-direction:column; gap:24px; padding:32px 12px;
    }
    .container-main{
      background:var(--card); backdrop-filter: blur(12px);
      border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
      max-width:1000px; width:100%; margin:0 auto; padding:20px; animation:fadeIn .35s ease;
    }
    @keyframes fadeIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}

    /* Header / logo */
    .toolbar{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .brand-row{display:flex; align-items:center; gap:10px}
    .brand h1{margin:0; font-weight:700; color:#fff; letter-spacing:-0.02em}
    .brand .kicker{color:var(--muted); font-size:.95rem}
    .logo{width:42px; height:42px; border-radius:12px; box-shadow:var(--shadow)}
    .logo-spin{transition: transform .6s ease}
    .logo-spin:hover{transform: rotate(8deg) scale(1.04)}

    /* Tabs */
    .tabs-hero.nav-tabs{border:0; justify-content:center; gap:8px; margin-top:6px; flex-wrap:wrap}
    .tabs-hero .nav-link{position:relative; border:0; background:rgba(255,255,255,.10); color:var(--fg);
      border-radius:999px; padding:.5rem 1rem; transition:background .2s ease}
    .tabs-hero .nav-link:hover{background:rgba(255,255,255,.16)}
    .tabs-hero .nav-link.active{background:rgba(255,255,255,.22); color:#fff}
    .tabs-hero .nav-link::after{
      content:""; position:absolute; left:14px; right:14px; bottom:-6px; height:3px; border-radius:2px;
      background:linear-gradient(90deg,var(--accent1),var(--accent2)); transform:scaleX(0);
      transform-origin:left; transition:transform .25s ease
    }
    .tabs-hero .nav-link.active::after{transform:scaleX(1)}

    /* Cards / controls */
    .card-lite{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:10px}
    .config-card{display:flex; flex-direction:column; gap:10px; padding:12px}
    .config-title{font-weight:600; word-break:break-word}
    .config-actions{display:flex; gap:6px; flex-wrap:wrap}
    .controls{display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap}
    .controls .grow{flex:1 1 260px}
    .form-select,.form-control,.btn{border-radius:10px}
    .btn-primary{background:linear-gradient(90deg,var(--accent1),var(--accent2)); border:0}

    .badge-row{display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin:10px 0}
    .description{text-align:center; color:var(--muted); margin:0 0 10px}
    footer{color:var(--muted); text-align:center; padding:8px}
    #particles{position:fixed; inset:0; pointer-events:none; opacity:.18; z-index:-1}
    @media (prefers-reduced-motion: reduce){ .tabs-hero .nav-link,.btn,.config-card,.logo-spin{transition:none!important} }
  </style>
</head>
<body>
  <canvas id="particles" aria-hidden="true"></canvas>

  <div class="container-main" role="main">
    <div class="toolbar">
      <div class="brand-row">
        <!-- Inline SVG Logo (CF) -->
        <svg class="logo logo-spin" viewBox="0 0 64 64" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop stop-color="#3b82f6"/><stop offset="1" stop-color="#7c3aed"/>
            </linearGradient>
          </defs>
          <rect rx="12" width="64" height="64" fill="url(#g1)"></rect>
          <text x="50%" y="54%" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-weight="700" font-size="24" fill="var(--logoText)">CF</text>
        </svg>
        <div class="brand">
          <h1 id="t-title">ConfigForge V2Ray</h1>
          <div class="kicker" id="t-kicker">Speed-tested subscriptions ¬∑ VLESS ¬∑ VMess ¬∑ Shadowsocks ¬∑ Trojan</div>
        </div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <select id="language-select" class="form-select" aria-label="Language">
          <option value="en">English</option><option value="fa">ŸÅÿßÿ±ÿ≥€å</option><option value="zh">‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
          <option value="es">Espa√±ol</option><option value="fr">Fran√ßais</option><option value="de">Deutsch</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value="ja">Êó•Êú¨Ë™û</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option><option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value="pt">Portugu√™s</option>
          <option value="it">Italiano</option><option value="tr">T√ºrk√ße</option><option value="nl">Nederlands</option>
        </select>
      </div>
    </div>

    <div class="badge-row">
      <a class="btn btn-sm btn-outline-light" target="_blank" rel="noopener" href="https://github.com/ShatakVPN/ConfigForge-V2Ray">‚≠ê <span id="t-star">Star on GitHub</span></a>
      <a class="btn btn-sm btn-outline-light" target="_blank" rel="noopener" href="https://github.com/ShatakVPN/ConfigForge-V2Ray/releases">üì¶ <span id="t-releases">Releases</span></a>
      <span class="badge text-bg-primary" id="t-speed">Speed test</span>
      <span class="badge text-bg-secondary" id="last-updated" title="Last updated">Updated: ‚Äî</span>
    </div>

    <p class="description" id="t-desc">Pick a country or use global subscriptions. Click a card to copy the URL.</p>

    <!-- Tabs -->
    <ul class="nav nav-tabs tabs-hero" role="tablist">
      <li class="nav-item"><button class="nav-link active" id="tab-configs" data-bs-toggle="tab" data-bs-target="#pane-configs" type="button" role="tab">Get Configs</button></li>
      <li class="nav-item"><button class="nav-link" id="tab-how" data-bs-toggle="tab" data-bs-target="#pane-how" type="button" role="tab">How to Use</button></li>
      <li class="nav-item"><button class="nav-link" id="tab-contact" data-bs-toggle="tab" data-bs-target="#pane-contact" type="button" role="tab">Contact</button></li>
    </ul>

    <div class="tab-content pt-2">
      <!-- CONFIGS -->
      <div class="tab-pane fade show active" id="pane-configs" role="tabpanel" aria-labelledby="tab-configs">

        <!-- GLOBAL -->
        <div class="card-lite mb-3">
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
            <strong id="t-global">Global subscriptions</strong>
            <div class="d-flex gap-2">
              <button id="btn-copy-global" class="btn btn-sm btn-outline-light">üìã <span id="t-copyall">Copy all</span></button>
              <button id="btn-qr-global" class="btn btn-sm btn-outline-light">üîó <span id="t-qr-word">QR</span></button>
            </div>
          </div>
          <div class="small text-secondary mt-1" id="t-global-hint">Works in most clients. Click a card to copy URL.</div>
          <div id="global-list" class="grid mt-2" aria-live="polite"></div>
        </div>

        <!-- COUNTRY -->
        <div class="controls mb-2">
          <div class="grow">
            <label class="form-label" for="country-select" id="t-country-label">Country</label>
            <div class="d-flex gap-2">
              <select id="country-select" class="form-select">
                <option value="">{Select Country}</option>
                <option value="at">üá¶üáπ Austria</option><option value="au">üá¶üá∫ Australia</option>
                <option value="bg">üáßüá¨ Bulgaria</option><option value="br">üáßüá∑ Brazil</option>
                <option value="ca">üá®üá¶ Canada</option><option value="ch">üá®üá≠ Switzerland</option>
                <option value="cz">üá®üáø Czech Republic</option><option value="de">üá©üá™ Germany</option>
                <option value="es">üá™üá∏ Spain</option><option value="fi">üá´üáÆ Finland</option>
                <option value="fr">üá´üá∑ France</option><option value="gb">üá¨üáß United Kingdom</option>
                <option value="hk">üá≠üá∞ Hong Kong</option><option value="hu">üá≠üá∫ Hungary</option>
                <option value="id">üáÆüá© Indonesia</option><option value="il">üáÆüá± Israel</option>
                <option value="in">üáÆüá≥ India</option><option value="ir">üáÆüá∑ Iran</option>
                <option value="it">üáÆüáπ Italy</option><option value="jp">üáØüáµ Japan</option>
                <option value="kr">üá∞üá∑ South Korea</option><option value="kz">üá∞üáø Kazakhstan</option>
                <option value="lt">üá±üáπ Lithuania</option><option value="md">üá≤üá© Moldova</option>
                <option value="nl">üá≥üá± Netherlands</option><option value="pl">üáµüá± Poland</option>
                <option value="pt">üáµüáπ Portugal</option><option value="rs">üá∑üá∏ Serbia</option>
                <option value="ru">üá∑üá∫ Russia</option><option value="se">üá∏üá™ Sweden</option>
                <option value="sg">üá∏üá¨ Singapore</option><option value="si">üá∏üáÆ Slovenia</option>
                <option value="tr">üáπüá∑ Turkey</option><option value="ua">üá∫üá¶ Ukraine</option>
                <option value="us">üá∫üá∏ United States</option><option value="vn">üáªüá≥ Vietnam</option>
              </select>
              <button id="btn-fav" class="btn btn-outline-light" type="button">‚òÖ <span id="t-fav">Favorite</span></button>
            </div>
          </div>
          <div class="grow">
            <label class="form-label" for="search-input" id="t-search-label">Search</label>
            <input id="search-input" class="form-control" type="search" placeholder="all / light / vless / vmess / shadowsocks / trojan">
          </div>
          <div>
            <button id="btn-get" class="btn btn-primary">üöÄ <span id="t-get">Get Configs</span></button>
            <button id="btn-copy-country" class="btn btn-outline-light mt-2 mt-sm-0">üìã <span id="t-copyall2">Copy all</span></button>
            <button id="btn-qr-country" class="btn btn-outline-light mt-2 mt-sm-0">üîó <span id="t-qr-word-2">QR</span></button>
          </div>
        </div>

        <div id="country-list" class="grid" aria-live="polite"></div>
      </div>

      <!-- HOW -->
      <div class="tab-pane fade" id="pane-how" role="tabpanel" aria-labelledby="tab-how">
        <div class="card-lite">
          <h3 class="h5" id="t-how-title">Quick import</h3>
          <ol id="t-how-steps" class="mb-3"></ol>
          <div class="row g-3">
            <div class="col-md-6"><div class="card-lite p-3"><strong>Android</strong><ul class="mb-0">
              <li><a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayNG">v2rayNG</a></li>
              <li><a target="_blank" rel="noopener" href="https://github.com/MatsuriDayo/NekoBoxForAndroid">NekoBox</a></li>
            </ul></div></div>
            <div class="col-md-6"><div class="card-lite p-3"><strong>iOS</strong><ul class="mb-0">
              <li><a target="_blank" rel="noopener" href="https://apps.apple.com/us/app/shadowrocket/id932747118">Shadowrocket</a></li>
              <li><a target="_blank" rel="noopener" href="https://apps.apple.com/us/app/quantumult-x/id1443988620">Quantumult X</a></li>
            </ul></div></div>
            <div class="col-md-6"><div class="card-lite p-3"><strong>Windows</strong><ul class="mb-0">
              <li><a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN">V2RayN</a></li>
              <li><a target="_blank" rel="noopener" href="https://github.com/Qv2ray/Qv2ray">Qv2ray</a></li>
            </ul></div></div>
            <div class="col-md-6"><div class="card-lite p-3"><strong>Linux / Mac</strong><ul class="mb-0">
              <li><a target="_blank" rel="noopener" href="https://github.com/v2rayA/v2rayA">v2rayA</a></li>
              <li><a target="_blank" rel="noopener" href="https://github.com/yanue/V2rayU">V2RayU (macOS)</a></li>
              <li><a target="_blank" rel="noopener" href="https://github.com/yichengchen/clashX">ClashX (macOS)</a></li>
            </ul></div></div>
          </div>
        </div>
      </div>

      <!-- CONTACT -->
      <div class="tab-pane fade" id="pane-contact" role="tabpanel" aria-labelledby="tab-contact">
        <div class="card-lite p-3 text-center">
          <p id="t-contact">Reach us on GitHub or email.</p>
          <p class="mb-0"><a target="_blank" rel="noopener" href="https://github.com/ShatakVPN">GitHub: ShatakVPN</a> ¬∑ <a href="mailto:ShatakVPN@gmail.com">ShatakVPN@gmail.com</a></p>
        </div>
      </div>
    </div>
  </div>

  <footer>Built with ‚ù§Ô∏è by <a target="_blank" rel="noopener" href="https://github.com/ShatakVPN">ShatakVPN</a> ¬∑ Powered by <a target="_blank" rel="noopener" href="https://github.com">GitHub</a> & <a target="_blank" rel="noopener" href="https://check-host.net">Check-Host</a></footer>

  <!-- Toast -->
  <div class="position-fixed top-0 end-0 p-3" style="z-index:1080">
    <div id="toast" class="toast text-bg-dark border-0" role="status" aria-live="polite" aria-atomic="true">
      <div class="d-flex">
        <div id="toast-body" class="toast-body">Copied.</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <!-- QR Modal -->
  <div class="modal fade" id="qrModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header">
          <h5 class="modal-title">QR</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <img id="qrImg" alt="QR" class="img-fluid rounded"/>
          <div class="small text-secondary mt-2" id="t-qr-hint">Scan in clients that support QR import.</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ---------- Bootstrap RTL/LTR ---------- */
    const BOOT_LTR='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css';
    const BOOT_RTL='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css';
    function setDir(lang){
      const rtl=['fa','ar'].includes(lang);
      document.documentElement.lang=lang;
      document.documentElement.dir=rtl?'rtl':'ltr';
      const link=document.getElementById('bootstrap-css');
      const href=rtl?BOOT_RTL:BOOT_LTR;
      if(link.getAttribute('href')!==href) link.setAttribute('href',href);
    }

    /* ---------- Twemoji ---------- */
    function tw(){ twemoji.parse(document.body,{folder:'svg',ext:'.svg',base:'https://cdn.jsdelivr.net/npm/twemoji@14.0.2/2/'}); }

    /* ---------- i18n ---------- */
    const T={ /* ‚Äî‚Äî‚Äî (ŸáŸÖÿßŸÜ ÿØ€å⁄©ÿ¥ŸÜÿ±€å ⁄©ÿßŸÖŸÑ ŸÇÿ®ŸÑ€å: en, fa, zh, es, fr, de, ru, ar, ja, ko, hi, pt, it, tr, nl) ‚Äî‚Äî‚Äî */
      en:{ title:'ConfigForge V2Ray', kicker:'Speed-tested subscriptions ¬∑ VLESS ¬∑ VMess ¬∑ Shadowsocks ¬∑ Trojan',
        star:'Star on GitHub', releases:'Releases', speed:'Speed test', desc:'Pick a country or use global subscriptions. Click a card to copy the URL.',
        tabs:{cfg:'Get Configs', how:'How to Use', contact:'Contact'},
        global:'Global subscriptions', globalHint:'Works in most clients. Click a card to copy URL.',
        copyAll:'Copy all', qrWord:'QR', country:'Country', select:'Select Country', fav:'Favorite',
        search:'Search', get:'Get Configs', copy:'Copy', open:'Open', copied:'Copied to clipboard.',
        howTitle:'Quick import', howSteps:['Copy a subscription URL from a card.','Open your client (v2rayNG, V2RayN, Shadowrocket, etc.).','Subscriptions ‚Üí Add ‚Üí paste URL ‚Üí Update.'],
        contact:'Reach us on GitHub or email.', noConfigs:'No configs found for this country.', error:'Error fetching configs. Please try again later.', qrHint:'Scan in clients that support QR import.'
      },
      fa:{ title:'ConfigForge V2Ray', kicker:'ÿ≥ÿßÿ®‚ÄåŸáÿß€å ÿ™ÿ≥ÿ™‚Äåÿ¥ÿØŸá ¬∑ VLESS ¬∑ VMess ¬∑ Shadowsocks ¬∑ Trojan',
        star:'ÿ≥ÿ™ÿßÿ±Ÿá ÿ®ÿØŸá', releases:'ÿ±€åŸÑ€åÿ≤Ÿáÿß', speed:'ÿ™ÿ≥ÿ™ ÿ≥ÿ±ÿπÿ™', desc:'⁄©ÿ¥Ÿàÿ± ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ €åÿß ÿßÿ≤ ÿ≥ÿßÿ®‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ. ÿ±Ÿà€å ⁄©ÿßÿ±ÿ™ ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ ÿ™ÿß ŸÑ€åŸÜ⁄© ⁄©Ÿæ€å ÿ¥ŸàÿØ.',
        tabs:{cfg:'ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿßŸÜŸÅ€å⁄Ø', how:'ÿ±Ÿàÿ¥ ÿßÿ≥ÿ™ŸÅÿßÿØŸá', contact:'ÿßÿ±ÿ™ÿ®ÿßÿ∑'},
        global:'ÿßÿ¥ÿ™ÿ±ÿß⁄©‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å', globalHint:'ÿØÿ± ÿß⁄©ÿ´ÿ± ⁄©ŸÑÿß€åŸÜÿ™‚ÄåŸáÿß ⁄©ÿßÿ± ŸÖ€å‚Äå⁄©ŸÜÿØ. ⁄©ŸÑ€å⁄© = ⁄©Ÿæ€å ŸÑ€åŸÜ⁄©.',
        copyAll:'⁄©Ÿæ€å ŸáŸÖŸá', qrWord:'⁄©€åŸàÿ¢ÿ±', country:'⁄©ÿ¥Ÿàÿ±', select:'ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ÿ¥Ÿàÿ±', fav:'ÿπŸÑÿßŸÇŸá‚ÄåŸÖŸÜÿØ€å',
        search:'ÿ¨ÿ≥ÿ™‚ÄåŸàÿ¨Ÿà', get:'ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿßŸÜŸÅ€å⁄Ø', copy:'⁄©Ÿæ€å', open:'ÿ®ÿßÿ≤⁄©ÿ±ÿØŸÜ', copied:'ÿØÿ± ⁄©ŸÑ€åŸæ‚Äåÿ®Ÿàÿ±ÿØ ⁄©Ÿæ€å ÿ¥ÿØ.',
        howTitle:'Ÿàÿ±ŸàÿØ ÿ≥ÿ±€åÿπ', howSteps:['€å⁄©€å ÿßÿ≤ ŸÑ€åŸÜ⁄©‚ÄåŸáÿß ÿ±ÿß ÿßÿ≤ ⁄©ÿßÿ±ÿ™ ⁄©Ÿæ€å ⁄©ŸÜ€åÿØ.','⁄©ŸÑÿß€åŸÜÿ™ ÿ±ÿß ÿ®ÿßÿ≤ ⁄©ŸÜ€åÿØ (v2rayNGÿå V2RayNÿå Shadowrocket Ÿà ‚Ä¶).','Subscriptions ‚Üí Add ‚Üí ⁄Üÿ≥ÿ®ÿßŸÜÿØŸÜ ŸÑ€åŸÜ⁄© ‚Üí Update.'],
        contact:'ÿØÿ± ⁄Ø€åÿ™‚ÄåŸáÿßÿ® €åÿß ÿß€åŸÖ€åŸÑ Ÿæ€åÿßŸÖ ÿ®ÿØŸá€åÿØ.', noConfigs:'ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ÿ¥Ÿàÿ± ŸÅÿß€åŸÑ€å Ÿæ€åÿØÿß ŸÜÿ¥ÿØ.', error:'ÿÆÿ∑ÿß ÿØÿ± ÿØÿ±€åÿßŸÅÿ™ ŸÅÿß€åŸÑ‚ÄåŸáÿß. ÿ®ÿπÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', qrHint:'ÿØÿ± ⁄©ŸÑÿß€åŸÜÿ™‚ÄåŸáÿß€å€å ⁄©Ÿá QR ÿ±ÿß Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ ÿßÿ≥⁄©ŸÜ ⁄©ŸÜ€åÿØ.'
      },
      /* ... ÿ≥ÿß€åÿ± ÿ≤ÿ®ÿßŸÜ‚ÄåŸáÿß ŸÖÿ´ŸÑ ŸÜÿ≥ÿÆŸáŸî ŸÇÿ®ŸÑ€å ... */
    };
    const S=(k,lang=state.lang)=>{const p=k.split('.');let v=T[lang];for(const x of p){v=v?.[x];}
      if(v==null){v=T.en;for(const x of p){v=v?.[x];}}return v??''};

    /* ---------- State ---------- */
    const state={
      lang: localStorage.getItem('cfg-lang') || (navigator.language||'en').slice(0,2),
      CONFIG_ROOT:'https://raw.githubusercontent.com/ShatakVPN/ConfigForge-V2Ray/main/configs',
      FILES:['all.txt','light.txt','vless.txt','vmess.txt','shadowsocks.txt','trojan.txt','unknown.txt'],
      toast:null
    };

    /* ---------- Toast ---------- */
    function showToast(msg){
      document.getElementById('toast-body').textContent=msg;
      state.toast ??= new bootstrap.Toast(document.getElementById('toast'),{delay:1700});
      state.toast.show();
    }

    /* ---------- LocalStorage HEAD cache (TTL 30m) ---------- */
    const TTL=30*60*1000;
    async function headExists(url){
      const key='head:'+url;
      try{
        const cached=JSON.parse(localStorage.getItem(key)||'null');
        if(cached && (Date.now()-cached.t)<TTL){
          return cached.ok ? new Response('',{status:200, headers:{'last-modified':cached.lm||''}}) : null;
        }
      }catch{}
      try{
        const r=await fetch(url,{method:'HEAD',cache:'no-cache'});
        const ok=r.ok; const lm=r.headers.get('last-modified')||'';
        try{ localStorage.setItem(key, JSON.stringify({t:Date.now(), ok, lm})); }catch{}
        return ok ? r : null;
      }catch{ return null; }
    }

    /* ---------- UI helpers ---------- */
    function makeCard(label,url){
      const card=document.createElement('div'); card.className='config-card card-lite';
      const title=document.createElement('div'); title.className='config-title'; title.textContent=label;
      const act=document.createElement('div'); act.className='config-actions';
      const bCopy=document.createElement('button'); bCopy.className='btn btn-outline-light btn-sm'; bCopy.textContent=S('copy');
      const bOpen=document.createElement('a'); bOpen.className='btn btn-outline-light btn-sm'; bOpen.target='_blank'; bOpen.rel='noopener'; bOpen.href=url; bOpen.textContent=S('open');
      const bQR=document.createElement('button'); bQR.className='btn btn-outline-light btn-sm'; bQR.textContent=S('qrWord');
      bCopy.addEventListener('click',()=>navigator.clipboard.writeText(url).then(()=>showToast(S('copied'))));
      bQR.addEventListener('click',()=>showQR(url));
      card.addEventListener('click',(e)=>{ if(e.target===card||e.target===title){ navigator.clipboard.writeText(url).then(()=>showToast(S('copied')));} });
      act.append(bCopy,bOpen,bQR); card.append(title,act); return card;
    }
    function showQR(text){
      const img=document.getElementById('qrImg');
      img.src='https://api.qrserver.com/v1/create-qr-code/?size=240x240&data='+encodeURIComponent(text);
      new bootstrap.Modal('#qrModal').show();
    }

    async function populateGlobal(){
      const wrap=document.getElementById('global-list'); wrap.innerHTML='<div class="text-center">‚è≥</div>';
      const pairs=state.FILES.map(f=>[f,`${state.CONFIG_ROOT}/${f}`]);
      const heads=await Promise.all(pairs.map(([,u])=>headExists(u)));
      wrap.innerHTML='';
      pairs.forEach(([f,u],i)=>{ if(heads[i]) wrap.appendChild(makeCard(f,u)); });
      document.getElementById('btn-copy-global').onclick=async()=>{
        const urls=pairs.filter((_,i)=>heads[i]).map(([,u])=>u).join('\n'); if(!urls)return;
        await navigator.clipboard.writeText(urls); showToast(S('copied'));
      };
      document.getElementById('btn-qr-global').onclick=()=>{
        const first=pairs.find((_,i)=>heads[i]); if(first) showQR(first[1]);
      };
    }

    async function populateCountry(country){
      const wrap=document.getElementById('country-list'); wrap.innerHTML='<div class="text-center">‚è≥</div>';
      const pairs=state.FILES.map(f=>[f,`${state.CONFIG_ROOT}/${country}/${f}`]);
      const heads=await Promise.all(pairs.map(([,u])=>headExists(u)));
      wrap.innerHTML='';
      const any=heads.some(Boolean);
      if(!any){ wrap.innerHTML=`<p class="text-center text-danger">${S('noConfigs')}</p>`; return; }
      pairs.forEach(([f,u],i)=>{ if(heads[i]) wrap.appendChild(makeCard(f,u)); });

      document.getElementById('btn-copy-country').onclick=async()=>{
        const urls=pairs.filter((_,i)=>heads[i]).map(([,u])=>u).join('\n'); if(!urls)return;
        await navigator.clipboard.writeText(urls); showToast(S('copied'));
      };
      document.getElementById('btn-qr-country').onclick=()=>{
        const first=pairs.find((_,i)=>heads[i]); if(first) showQR(first[1]);
      };

      // search
      const input=document.getElementById('search-input');
      input.oninput=()=>{
        const q=input.value.trim().toLowerCase();
        for(const card of wrap.children){
          const title=card.querySelector('.config-title').textContent.toLowerCase();
          card.style.display=(!q||title.includes(q))?'':'none';
        }
      };
    }

    function applyFavorite(){
      const fav=localStorage.getItem('cfg-fav')||'';
      const sel=document.getElementById('country-select');
      if(fav && sel.querySelector(`option[value="${fav}"]`)) sel.value=fav;
    }

    async function setUpdatedBadge(){
      const badge=document.getElementById('last-updated');
      const headKey='head:'+state.CONFIG_ROOT+'/all.txt';
      let when=null;
      try{ const c=JSON.parse(localStorage.getItem(headKey)||'null'); if(c && (Date.now()-c.t)<TTL) when=c.lm||null; }catch{}
      if(!when){ const r=await headExists(`${state.CONFIG_ROOT}/all.txt`); when=r?.headers?.get('last-modified')||null; }
      if(!when){
        try{
          const r=await fetch('https://api.github.com/repos/ShatakVPN/ConfigForge-V2Ray/commits?path=configs&per_page=1',{headers:{'Accept':'application/vnd.github+json'}});
          if(r.ok){ const js=await r.json(); when=js?.[0]?.commit?.committer?.date||null; }
        }catch{}
      }
      if(when) badge.textContent='Updated: '+new Date(when).toUTCString();
    }

    async function setSpeedBadge(){
      const ok=await headExists(`${state.CONFIG_ROOT}/all.txt`) || await headExists(`${state.CONFIG_ROOT}/light.txt`);
      const el=document.getElementById('t-speed');
      el.className='badge '+(ok?'text-bg-success':'text-bg-secondary');
      el.textContent=S('speed')+(ok?' ‚úì':' ‚Äî');
    }

    async function autodetectCountry(){
      try{
        const r=await fetch('https://ipapi.co/json/'); const j=await r.json();
        const code=(j.country_code||'').toLowerCase();
        const sel=document.getElementById('country-select');
        if(code && sel.querySelector(`option[value="${code}"]`)) sel.value=code;
      }catch{}
    }

    function applyLang(){
      const lang=state.lang=(T[state.lang]?state.lang:'en');
      localStorage.setItem('cfg-lang',state.lang);
      setDir(lang);

      const map=[
        ['t-title','title'],['t-kicker','kicker'],['t-star','star'],['t-releases','releases'],
        ['t-speed','speed'],['t-desc','desc'],
        ['tab-configs','tabs.cfg'],['tab-how','tabs.how'],['tab-contact','tabs.contact'],
        ['t-global','global'],['t-global-hint','globalHint'],
        ['t-copyall','copyAll'],['t-qr-word','qrWord'],['t-qr-word-2','qrWord'],
        ['t-country-label','country'],['t-fav','fav'],
        ['t-search-label','search'],['t-get','get'],['t-copyall2','copyAll'],
        ['t-how-title','howTitle'],['t-contact','contact'],['t-qr-hint','qrHint']
      ];
      for(const [id,key] of map){ const el=document.getElementById(id); if(el) el.textContent=S(key); }
      const sel=document.getElementById('country-select'); if(sel && sel.options[0]) sel.options[0].textContent=S('select');

      // How steps
      const steps=S('howSteps'); const ol=document.getElementById('t-how-steps');
      ol.innerHTML=(steps||T.en.howSteps).map(s=>`<li>${s}</li>`).join('');
      tw();
    }

    /* ---------- Particles ---------- */
    (function(){
      const c=document.getElementById('particles'),x=c.getContext('2d');
      function fit(){ c.width=innerWidth; c.height=innerHeight; } fit(); addEventListener('resize',fit);
      const P=Array.from({length:50},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*2+1,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4}));
      (function tick(){ x.clearRect(0,0,c.width,c.height);
        for(const p of P){ p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>c.width)p.vx*=-1; if(p.y<0||p.y>c.height)p.vy*=-1;
          x.fillStyle='rgba(0,0,0,.0)'; /* ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ÿ±€å‚ÄåŸæ€åŸÜÿ™ */
          x.fillStyle='rgba(255,255,255,.8)'; x.beginPath(); x.arc(p.x,p.y,p.r,0,Math.PI*2); x.fill(); }
        requestAnimationFrame(tick);
      })();
    })();

    /* ---------- Events ---------- */
    document.getElementById('language-select').addEventListener('change', e=>{
      state.lang=e.target.value; applyLang();
    });
    document.getElementById('btn-get').addEventListener('click',()=>{
      const c=document.getElementById('country-select').value;
      if(!c){ showToast(S('select')); return; }
      populateCountry(c);
    });
    document.getElementById('btn-fav').addEventListener('click',()=>{
      const c=document.getElementById('country-select').value;
      if(!c){ showToast(S('select')); return; }
      localStorage.setItem('cfg-fav',c); showToast('‚òÖ');
    });

    // Deep link (?lang=&country=)
    (function(){
      const p=new URLSearchParams(location.search); const L=p.get('lang'); const C=p.get('country');
      if(L && T[L]) state.lang=L;
      applyLang();
      if(C){ const sel=document.getElementById('country-select'); if(sel.querySelector(`option[value="${C}"]`)){ sel.value=C; populateCountry(C);} }
      else{ applyFavorite(); }
      document.getElementById('language-select').value=state.lang;
    })();

    // Init
    populateGlobal();
    setUpdatedBadge();
    setSpeedBadge();
    autodetectCountry();

    // Service Worker
    if('serviceWorker' in navigator){
      const swUrl=new URL('./sw.js', location).href;
      navigator.serviceWorker.register(swUrl,{scope:'./'}).catch(()=>{});
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
