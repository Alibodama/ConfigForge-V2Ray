<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ConfigForge V2Ray</title>
  <!-- SEO / Social -->
  <meta name="description" content="Fetch, organize, and copy ready-to-use V2Ray subscription links (VLESS, VMess, Shadowsocks, Trojan) with speed-tested nodes." />
  <meta property="og:title" content="ConfigForge V2Ray" />
  <meta property="og:description" content="Speed-tested, ready-to-use subscription links by country or global." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://opengraph.githubassets.com/1/ShatakVPN/ConfigForge-V2Ray" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>⚙️</text></svg>">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Emoji&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script>
  <style>
    :root {
      --fg:#e2e8f0; --muted:#cbd5e1; --glass:rgba(255,255,255,0.05); --glass-2:rgba(255,255,255,0.12);
      --accent-1:#7c3aed; --accent-2:#3b82f6; --ok:#10b981; --warn:#f59e0b; --err:#ef4444;
    }
    * { box-sizing: border-box; }
    html,body{ height:100%; }
    body {
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(124,58,237,.25), transparent 60%),
        radial-gradient(900px 500px at 0% 100%, rgba(59,130,246,.18), transparent 60%),
        linear-gradient(180deg, rgba(10,25,47,0.96), rgba(30,41,59,0.96)),
        url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"%3E%3Cpath fill="none" stroke="%23ffffff" stroke-opacity="0.08" stroke-width="2" d="M0,160L48,176C96,192,192,224,288,213.3C384,203,480,149,576,149.3C672,149,768,203,864,213.3C960,224,1056,192,1152,176C1248,160,1344,160,1392,160L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"/%3E%3C/svg%3E');
      background-size: cover; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: space-between; font-family: 'Inter', sans-serif; color: var(--fg); padding: 4rem 1rem;
    }
    .container {
      position: relative; max-width: 1000px; width: 100%; padding: 2rem; border-radius: 18px; color: var(--fg);
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.04);
      backdrop-filter: blur(16px);
      animation: fadeIn .6s ease-out;
    }
    .container::before{ /* subtle neon border */
      content:""; position:absolute; inset:-1px; border-radius: 20px; padding:1px; background:
        linear-gradient(135deg, rgba(124,58,237,.6), rgba(59,130,246,.6)); -webkit-mask:
        linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-12px);} to{opacity:1; transform:none;} }
    h1 { text-align:center; margin-bottom: .25rem; font-weight:700; color:#fff; letter-spacing:-0.02em; }
    .kicker { text-align:center; margin-bottom: 1rem; color: var(--muted); font-size: .95rem; }

    /* badges row */
    .badge-row { display:flex; gap:.5rem; justify-content:center; flex-wrap:wrap; margin-bottom:1rem; }
    .btn-ghost { --b:rgba(255,255,255,.16); color:var(--fg)!important; border:1px solid var(--b)!important; background:rgba(255,255,255,.04)!important; }
    .chip { display:inline-flex; align-items:center; gap:.4rem; padding:.35rem .6rem; border-radius:999px; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.14); font-size:.85rem; white-space:nowrap; }
    .chip i { font-style:normal; opacity:.9 }

    .description { text-align:center; margin-bottom: 1rem; font-size: 1.02rem; color: var(--muted); opacity:.95; }

    .nav-tabs { border-bottom:none; justify-content:center; margin-bottom:1rem; }
    .nav-tabs .nav-link { background: rgba(255,255,255,0.08); color: var(--fg); border:none; margin:0 .5rem; border-radius: 10px 10px 0 0; }
    .nav-tabs .nav-link.active { background: rgba(255,255,255,0.2); color:#fff; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); }
    .tab-content { animation: fadeIn .35s ease; }

    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(230px,1fr)); gap: .8rem; }
    .card-lite { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.12); border-radius: 14px; padding: 1rem; }

    .config-card { transition: transform .15s ease, box-shadow .15s ease; font-weight:600; }
    .config-card:hover { transform: translateY(-2px); box-shadow: 0 10px 26px rgba(0,0,0,0.25); }

    .toolbar { display:flex; gap:.5rem; align-items:center; justify-content:space-between; flex-wrap:wrap; margin-bottom:.75rem; }
    #language-select { width: 160px; }

    /* keep button widths stable across languages */
    .btn-icon { display:inline-flex; align-items:center; gap:.45rem; white-space:nowrap; }
    .btn-icon .label { width: 3.6em; display:inline-block; text-align:left; font-weight:600; font-size:.85rem; }
    .btn-icon .ico { font-size:1rem; }
    .btn-group-sm>.btn, .btn-sm { padding:.35rem .5rem; }

    .error-message{ color:#f87171; text-align:center; font-weight:500; }
    .loading-spinner { text-align:center; font-size:1.2rem; }

    footer { padding: 1.25rem; text-align:center; color: var(--muted); font-size:.9rem; }
    footer a { color:#93c5fd; font-weight:600; text-decoration:none; }
    footer a:hover { text-decoration:underline; color:#fff; }

    [dir="rtl"] { text-align:right; }
    canvas { position: fixed; inset:0; width:100%; height:100%; z-index:-1; opacity:.22; }
    @media (prefers-reduced-motion: reduce){ .config-card:hover { transform:none; } }
  </style>
</head>
<body>
  <canvas id="particles" aria-hidden="true"></canvas>

  <div class="container" role="main">
    <div class="toolbar">
      <div>
        <h1 id="title" class="mb-0">ConfigForge V2Ray</h1>
        <div class="kicker" id="kicker">Speed‑tested subscription links · VLESS · VMess · Shadowsocks · Trojan</div>
      </div>
      <select id="language-select" class="form-select" aria-label="Language switcher">
        <option value="en">English</option>
        <option value="fa">فارسی</option>
        <option value="zh">中文 (简体)</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
        <option value="ru">Русский</option>
        <option value="ar">العربية</option>
        <option value="ja">日本語</option>
        <option value="ko">한국어</option>
        <option value="hi">हिन्दी</option>
        <option value="pt">Português</option>
        <option value="it">Italiano</option>
        <option value="tr">Türkçe</option>
        <option value="nl">Nederlands</option>
      </select>
    </div>

    <!-- Badges (stars, release + live health) -->
    <div class="badge-row">
      <a class="btn btn-sm btn-ghost" href="https://github.com/ShatakVPN/ConfigForge-V2Ray" target="_blank" rel="noopener">⭐ <span data-i18n="star">Star</span></a>
      <a class="btn btn-sm btn-ghost" href="https://github.com/ShatakVPN/ConfigForge-V2Ray/releases" target="_blank" rel="noopener">📦 <span data-i18n="releases">Releases</span></a>
      <span id="speed-chip" class="chip" title="Speed test status"><i>⚡</i><b id="speed-label">Speed test</b><span id="speed-dot" style="display:inline-block; width:.55rem; height:.55rem; border-radius:50%; background:var(--warn);"></span></span>
      <span id="last-updated" class="chip" title="Last updated (UTC)"><i>🕒</i><b data-i18n="updated">Updated</b><span id="updated-when">—</span></span>
    </div>

    <p class="description" id="description">Pick a country or use global subscriptions. Click a card to copy the raw subscription URL.</p>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="configs-tab" data-bs-toggle="tab" data-bs-target="#configs" type="button" role="tab" aria-controls="configs" aria-selected="true">Get Configs</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="howto-tab" data-bs-toggle="tab" data-bs-target="#howto" type="button" role="tab" aria-controls="howto" aria-selected="false">How to Use</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Contact</button>
      </li>
    </ul>

    <div class="tab-content" id="myTabContent">
      <!-- CONFIGS TAB -->
      <div class="tab-pane fade show active" id="configs" role="tabpanel" aria-labelledby="configs-tab">
        <!-- Global subscriptions quick access -->
        <div class="card-lite mb-3">
          <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
            <strong id="global-heading">Global subscriptions</strong>
            <div class="small text-secondary" id="global-hint">Works in most clients. Click to copy URL.</div>
          </div>
          <div id="global-list" class="grid mt-2" aria-live="polite"></div>
        </div>

        <div class="row g-3 align-items-end">
          <div class="col-sm-6">
            <label for="country-select" class="form-label" id="country-label">Country</label>
            <select id="country-select" class="form-select">
              <option value="">Select Country</option>
              <option value="at">🇦🇹 Austria</option>
              <option value="au">🇦🇺 Australia</option>
              <option value="bg">🇧🇬 Bulgaria</option>
              <option value="br">🇧🇷 Brazil</option>
              <option value="ca">🇨🇦 Canada</option>
              <option value="ch">🇨🇭 Switzerland</option>
              <option value="cz">🇨🇿 Czech Republic</option>
              <option value="de">🇩🇪 Germany</option>
              <option value="es">🇪🇸 Spain</option>
              <option value="fi">🇫🇮 Finland</option>
              <option value="fr">🇫🇷 France</option>
              <option value="gb">🇬🇧 United Kingdom</option>
              <option value="hk">🇭🇰 Hong Kong</option>
              <option value="hu">🇭🇺 Hungary</option>
              <option value="id">🇮🇩 Indonesia</option>
              <option value="il">🇮🇱 Israel</option>
              <option value="in">🇮🇳 India</option>
              <option value="ir">🇮🇷 Iran</option>
              <option value="it">🇮🇹 Italy</option>
              <option value="jp">🇯🇵 Japan</option>
              <option value="kr">🇰🇷 South Korea</option>
              <option value="kz">🇰🇿 Kazakhstan</option>
              <option value="lt">🇱🇹 Lithuania</option>
              <option value="md">🇲🇩 Moldova</option>
              <option value="nl">🇳🇱 Netherlands</option>
              <option value="pl">🇵🇱 Poland</option>
              <option value="pt">🇵🇹 Portugal</option>
              <option value="rs">🇷🇸 Serbia</option>
              <option value="ru">🇷🇺 Russia</option>
              <option value="se">🇸🇪 Sweden</option>
              <option value="sg">🇸🇬 Singapore</option>
              <option value="si">🇸🇮 Slovenia</option>
              <option value="tr">🇹🇷 Turkey</option>
              <option value="ua">🇺🇦 Ukraine</option>
              <option value="us">🇺🇸 United States</option>
              <option value="vn">🇻🇳 Vietnam</option>
            </select>
          </div>
          <div class="col-sm-6 d-grid d-sm-block">
            <button id="get-configs" class="btn btn-primary w-100 w-sm-auto">Get Configs</button>
          </div>
        </div>

        <div id="configs-list" class="grid mt-3" aria-live="polite"></div>
      </div>

      <!-- HOW TO TAB -->
      <div class="tab-pane fade" id="howto" role="tabpanel" aria-labelledby="howto-tab">
        <div class="card-lite">
          <h3 class="h5 mb-3" id="howto-heading">Quick import</h3>
          <ol class="mb-3" id="howto-steps">
            <li>Copy a subscription URL from a card.</li>
            <li>Open your client (v2rayNG, V2RayN, Shadowrocket, etc.).</li>
            <li>Find <em>Subscriptions</em> → <em>Add</em> → paste URL → <em>Update</em>.</li>
          </ol>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card-lite p-3">
                <strong>Android</strong>
                <ul class="mb-0">
                  <li><a href="https://github.com/2dust/v2rayNG" target="_blank" rel="noopener">v2rayNG</a></li>
                  <li><a href="https://github.com/MatsuriDayo/NekoBoxForAndroid" target="_blank" rel="noopener">NekoBox</a></li>
                </ul>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card-lite p-3">
                <strong>iOS</strong>
                <ul class="mb-0">
                  <li><a href="https://apps.apple.com/us/app/shadowrocket/id932747118" target="_blank" rel="noopener">Shadowrocket</a></li>
                  <li><a href="https://apps.apple.com/us/app/quantumult-x/id1443988620" target="_blank" rel="noopener">Quantumult X</a></li>
                </ul>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card-lite p-3 mt-3">
                <strong>Windows</strong>
                <ul class="mb-0">
                  <li><a href="https://github.com/2dust/v2rayN" target="_blank" rel="noopener">V2RayN</a></li>
                  <li><a href="https://github.com/Qv2ray/Qv2ray" target="_blank" rel="noopener">Qv2ray</a></li>
                </ul>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card-lite p-3 mt-3">
                <strong>Linux / Mac</strong>
                <ul class="mb-0">
                  <li><a href="https://github.com/v2rayA/v2rayA" target="_blank" rel="noopener">v2rayA</a></li>
                  <li><a href="https://github.com/yanue/V2rayU" target="_blank" rel="noopener">V2RayU (macOS)</a></li>
                  <li><a href="https://github.com/yichengchen/clashX" target="_blank" rel="noopener">ClashX (macOS)</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CONTACT TAB -->
      <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
        <div class="card-lite p-3 text-center">
          <p id="contact-text">Reach us on GitHub or email.</p>
          <p class="mb-0"><a href="https://github.com/ShatakVPN" target="_blank" rel="noopener">GitHub: ShatakVPN</a> · <a href="mailto:ShatakVPN@gmail.com">ShatakVPN@gmail.com</a></p>
        </div>
      </div>
    </div>

  </div>

  <footer id="footer">Built with ❤️ by <a href="https://github.com/ShatakVPN" target="_blank" rel="noopener">ShatakVPN</a> · Powered by <a href="https://github.com" target="_blank" rel="noopener">GitHub</a> & <a href="https://check-host.net" target="_blank" rel="noopener">Check‑Host</a></footer>

  <!-- Toasts -->
  <div class="position-fixed top-0 end-0 p-3" style="z-index: 1080">
    <div id="toast" class="toast align-items-center text-bg-dark border-0" role="status" aria-live="polite" aria-atomic="true">
      <div class="d-flex">
        <div id="toast-body" class="toast-body">Copied to clipboard.</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <script>
    // Twemoji
    twemoji.parse(document.body, { folder: 'svg', ext: '.svg', base: 'https://cdn.jsdelivr.net/npm/twemoji@14.0.2/2/' });

    // i18n (full set)
    const translations = {
      en: { title:'ConfigForge V2Ray', kicker:'Speed‑tested subscription links · VLESS · VMess · Shadowsocks · Trojan', description:'Pick a country or use global subscriptions. Click a card to copy the raw subscription URL.', configsTab:'Get Configs', howtoTab:'How to Use', contactTab:'Contact', selectCountry:'Select Country', countryLabel:'Country', getBtns:'Get Configs', noConfigs:'No configs found for this country.', error:'Error fetching configs. Please try again later.', copied:'Subscription URL copied.', globalHeading:'Global subscriptions', globalHint:'Works in most clients. Click to copy URL.', howtoHeading:'Quick import', howtoSteps:['Copy a subscription URL from a card.','Open your client (v2rayNG, V2RayN, Shadowrocket, etc.).','Find Subscriptions → Add → paste URL → Update.'], contactText:'Reach us on GitHub or email.', star:'Star', releases:'Releases', updated:'Updated', speed:'Speed test', speedReady:'Online', speedOffline:'Offline', btnCopy:'Copy', btnOpen:'Open' },
      fa: { title:'ConfigForge V2Ray', kicker:'ساب‌های تست‌شده · VLESS · VMess · Shadowsocks · Trojan', description:'کشور را انتخاب کنید یا از ساب‌های عمومی استفاده کنید. روی کارت کلیک کنید تا لینک کپی شود.', configsTab:'دریافت کانفیگ', howtoTab:'روش استفاده', contactTab:'ارتباط', selectCountry:'انتخاب کشور', countryLabel:'کشور', getBtns:'دریافت کانفیگ', noConfigs:'برای این کشور فایلی پیدا نشد.', error:'خطا در دریافت فایل‌ها. بعداً تلاش کنید.', copied:'لینک اشتراک کپی شد.', globalHeading:'اشتراک‌های عمومی', globalHint:'در اکثر کلاینت‌ها کار می‌کند. کلیک = کپی لینک.', howtoHeading:'ورود سریع', howtoSteps:['یک لینک اشتراک را از کارت کپی کنید.','کلاینت خود را باز کنید (v2rayNG، V2RayN، Shadowrocket و …).','Subscriptions → Add → پیست لینک → Update.'], contactText:'در گیت‌هاب یا ایمیل پیام بدهید.', star:'ستاره', releases:'ریلیزها', updated:'بروزرسانی', speed:'تست سرعت', speedReady:'آنلاین', speedOffline:'آفلاین', btnCopy:'کپی', btnOpen:'باز کردن' },
      zh: { title:'ConfigForge V2Ray', kicker:'经过测速的订阅链接 · VLESS · VMess · Shadowsocks · Trojan', description:'选择国家或使用全局订阅。点击卡片复制原始订阅链接。', configsTab:'获取配置', howtoTab:'使用方法', contactTab:'联系我们', selectCountry:'选择国家', countryLabel:'国家/地区', getBtns:'获取配置', noConfigs:'未找到此国家的配置。', error:'获取配置时出错，请稍后再试。', copied:'订阅链接已复制。', globalHeading:'全局订阅', globalHint:'适用于大多数客户端。点击复制链接。', howtoHeading:'快速导入', howtoSteps:['从卡片复制订阅链接。','打开客户端（v2rayNG、V2RayN、Shadowrocket 等）。','找到 Subscriptions → Add → 粘贴链接 → Update。'], contactText:'通过 GitHub 或邮箱联系。', star:'收藏', releases:'发布', updated:'更新时间', speed:'测速', speedReady:'在线', speedOffline:'离线', btnCopy:'复制', btnOpen:'打开' },
      es: { title:'ConfigForge V2Ray', kicker:'Enlaces de suscripción probados · VLESS · VMess · Shadowsocks · Trojan', description:'Elige un país o usa suscripciones globales. Haz clic para copiar la URL.', configsTab:'Obtener Configs', howtoTab:'Cómo Usar', contactTab:'Contacto', selectCountry:'Seleccionar País', countryLabel:'País', getBtns:'Obtener', noConfigs:'No hay configuraciones para este país.', error:'Error al obtener configuraciones. Inténtalo más tarde.', copied:'Enlace copiado.', globalHeading:'Suscripciones globales', globalHint:'Funciona en la mayoría de clientes. Clic para copiar.', howtoHeading:'Importación rápida', howtoSteps:['Copia un enlace de suscripción.','Abre tu cliente (v2rayNG, V2RayN, Shadowrocket, etc.).','Subscriptions → Add → pega URL → Update.'], contactText:'Contáctanos por GitHub o email.', star:'Star', releases:'Releases', updated:'Actualizado', speed:'Test de velocidad', speedReady:'En línea', speedOffline:'Fuera de línea', btnCopy:'Copiar', btnOpen:'Abrir' },
      fr: { title:'ConfigForge V2Ray', kicker:'Abonnements testés · VLESS · VMess · Shadowsocks · Trojan', description:'Choisissez un pays ou utilisez les abonnements globaux. Cliquez pour copier l’URL.', configsTab:'Obtenir', howtoTab:'Mode d’emploi', contactTab:'Contact', selectCountry:'Sélectionner un pays', countryLabel:'Pays', getBtns:'Obtenir', noConfigs:'Aucune configuration trouvée.', error:'Erreur de récupération. Réessayez plus tard.', copied:'Lien copié.', globalHeading:'Abonnements globaux', globalHint:'Fonctionne dans la plupart des clients.', howtoHeading:'Import rapide', howtoSteps:['Copiez un lien.','Ouvrez votre client.','Subscriptions → Add → collez → Update.'], contactText:'Contact via GitHub ou email.', star:'Étoile', releases:'Versions', updated:'Mise à jour', speed:'Test vitesse', speedReady:'En ligne', speedOffline:'Hors ligne', btnCopy:'Copier', btnOpen:'Ouvrir' },
      de: { title:'ConfigForge V2Ray', kicker:'Geschwindigkeitsgetestete Abos · VLESS · VMess · Shadowsocks · Trojan', description:'Land wählen oder globale Abos nutzen. Klick zum Kopieren.', configsTab:'Configs holen', howtoTab:'Anleitung', contactTab:'Kontakt', selectCountry:'Land wählen', countryLabel:'Land', getBtns:'Abrufen', noConfigs:'Keine Konfigurationen gefunden.', error:'Fehler beim Abrufen.', copied:'Abo-Link kopiert.', globalHeading:'Globale Abos', globalHint:'Funktioniert in den meisten Clients.', howtoHeading:'Schnellimport', howtoSteps:['Link kopieren.','Client öffnen.','Subscriptions → Add → URL einfügen → Update.'], contactText:'Kontakt über GitHub oder E‑Mail.', star:'Stern', releases:'Releases', updated:'Aktualisiert', speed:'Speedtest', speedReady:'Online', speedOffline:'Offline', btnCopy:'Kopieren', btnOpen:'Öffnen' },
      ru: { title:'ConfigForge V2Ray', kicker:'Проверенные подписки · VLESS · VMess · Shadowsocks · Trojan', description:'Выберите страну или используйте глобальные подписки. Клик — копирование ссылки.', configsTab:'Получить', howtoTab:'Как использовать', contactTab:'Контакты', selectCountry:'Выбрать страну', countryLabel:'Страна', getBtns:'Получить', noConfigs:'Ничего не найдено.', error:'Ошибка при получении.', copied:'Ссылка скопирована.', globalHeading:'Глобальные подписки', globalHint:'Работает в большинстве клиентов.', howtoHeading:'Быстрый импорт', howtoSteps:['Скопируйте ссылку.','Откройте клиент.','Subscriptions → Add → вставить URL → Update.'], contactText:'Связь через GitHub или email.', star:'Избранное', releases:'Релизы', updated:'Обновлено', speed:'Тест скорости', speedReady:'Онлайн', speedOffline:'Офлайн', btnCopy:'Копия', btnOpen:'Открыть' },
      ar: { title:'ConfigForge V2Ray', kicker:'روابط اشتراك مختبرة · VLESS · VMess · Shadowsocks · Trojan', description:'اختر الدولة أو استخدم الاشتراكات العامة. انقر لنسخ الرابط.', configsTab:'الحصول على الإعدادات', howtoTab:'طريقة الاستخدام', contactTab:'اتصل بنا', selectCountry:'اختر الدولة', countryLabel:'الدولة', getBtns:'جلب', noConfigs:'لا توجد إعدادات.', error:'حدث خطأ في الجلب.', copied:'تم نسخ الرابط.', globalHeading:'الاشتراكات العامة', globalHint:'تعمل مع معظم العملاء.', howtoHeading:'استيراد سريع', howtoSteps:['انسخ الرابط.','افتح التطبيق.','Subscriptions → Add → لصق الرابط → Update.'], contactText:'تواصل عبر GitHub أو البريد.', star:'نجمة', releases:'الإصدارات', updated:'آخر تحديث', speed:'اختبار السرعة', speedReady:'متصل', speedOffline:'غير متصل', btnCopy:'نسخ', btnOpen:'فتح' },
      ja: { title:'ConfigForge V2Ray', kicker:'速度テスト済みのサブスクリプション · VLESS · VMess · Shadowsocks · Trojan', description:'国を選ぶかグローバルを使用。カードをクリックでURLをコピー。', configsTab:'取得', howtoTab:'使い方', contactTab:'連絡先', selectCountry:'国を選択', countryLabel:'国', getBtns:'取得', noConfigs:'見つかりません。', error:'取得エラー。後で再試行。', copied:'コピーしました。', globalHeading:'グローバル', globalHint:'多くのクライアントで動作。', howtoHeading:'クイック導入', howtoSteps:['リンクをコピー。','クライアントを開く。','Subscriptions → Add → 貼り付け → Update.'], contactText:'GitHub またはメールで連絡。', star:'スター', releases:'リリース', updated:'更新', speed:'速度テスト', speedReady:'オンライン', speedOffline:'オフライン', btnCopy:'コピー', btnOpen:'開く' },
      ko: { title:'ConfigForge V2Ray', kicker:'속도 테스트된 구독 링크 · VLESS · VMess · Shadowsocks · Trojan', description:'국가를 선택하거나 글로벌 구독 사용. 카드 클릭 시 URL 복사.', configsTab:'가져오기', howtoTab:'사용 방법', contactTab:'문의', selectCountry:'국가 선택', countryLabel:'국가', getBtns:'가져오기', noConfigs:'구성이 없습니다.', error:'가져오기 오류.', copied:'복사됨.', globalHeading:'글로벌 구독', globalHint:'대부분의 클라이언트에서 작동.', howtoHeading:'빠른 가져오기', howtoSteps:['링크 복사','클라이언트 열기','Subscriptions → Add → 붙여넣기 → Update'], contactText:'GitHub 또는 이메일.', star:'즐겨찾기', releases:'릴리스', updated:'업데이트', speed:'속도 테스트', speedReady:'온라인', speedOffline:'오프라인', btnCopy:'복사', btnOpen:'열기' },
      hi: { title:'ConfigForge V2Ray', kicker:'स्पीड-टेस्टेड सब्सक्रिप्शन लिंक · VLESS · VMess · Shadowsocks · Trojan', description:'देश चुनें या ग्लोबल सब्सक्रिप्शन उपयोग करें। कार्ड पर क्लिक कर URL कॉपी करें।', configsTab:'प्राप्त करें', howtoTab:'कैसे उपयोग करें', contactTab:'संपर्क', selectCountry:'देश चुनें', countryLabel:'देश', getBtns:'लाओ', noConfigs:'कोई कॉन्फ़िग नहीं मिला।', error:'प्राप्ति त्रुटि।', copied:'लिंक कॉपी हुआ।', globalHeading:'ग्लोबल सब्सक्रिप्शन', globalHint:'अधिकांश क्लाइंट में काम करता है।', howtoHeading:'त्वरित इंपोर्ट', howtoSteps:['लिंक कॉपी करें।','क्लाइंट खोलें।','Subscriptions → Add → URL पेस्ट → Update.'], contactText:'GitHub या ईमेल से संपर्क करें।', star:'स्टार', releases:'रिलीज़', updated:'अपडेट', speed:'स्पीड टेस्ट', speedReady:'ऑनलाइन', speedOffline:'ऑफ़लाइन', btnCopy:'कॉपी', btnOpen:'खोलें' },
      pt: { title:'ConfigForge V2Ray', kicker:'Assinaturas testadas · VLESS · VMess · Shadowsocks · Trojan', description:'Escolha um país ou use assinaturas globais. Clique para copiar.', configsTab:'Buscar', howtoTab:'Como usar', contactTab:'Contato', selectCountry:'Selecionar país', countryLabel:'País', getBtns:'Buscar', noConfigs:'Nada encontrado.', error:'Erro ao buscar.', copied:'Link copiado.', globalHeading:'Assinaturas globais', globalHint:'Funciona na maioria dos clientes.', howtoHeading:'Importação rápida', howtoSteps:['Copie o link.','Abra o cliente.','Subscriptions → Add → colar → Update.'], contactText:'Fale pelo GitHub ou e‑mail.', star:'Star', releases:'Releases', updated:'Atualizado', speed:'Teste de velocidade', speedReady:'Online', speedOffline:'Offline', btnCopy:'Copiar', btnOpen:'Abrir' },
      it: { title:'ConfigForge V2Ray', kicker:'Link di abbonamento testati · VLESS · VMess · Shadowsocks · Trojan', description:'Scegli un paese o usa le sottoscrizioni globali. Clicca per copiare.', configsTab:'Ottieni', howtoTab:'Come si usa', contactTab:'Contatti', selectCountry:'Seleziona Paese', countryLabel:'Paese', getBtns:'Ottieni', noConfigs:'Nessuna config trovata.', error:'Errore di recupero.', copied:'Link copiato.', globalHeading:'Sottoscrizioni globali', globalHint:'Funziona con la maggior parte dei client.', howtoHeading:'Import rapido', howtoSteps:['Copia il link.','Apri il client.','Subscriptions → Add → incolla → Update.'], contactText:'Contattaci su GitHub o email.', star:'Stella', releases:'Rilasci', updated:'Aggiornato', speed:'Test velocità', speedReady:'Online', speedOffline:'Offline', btnCopy:'Copia', btnOpen:'Apri' },
      tr: { title:'ConfigForge V2Ray', kicker:'Hız testi yapılmış abonelikler · VLESS · VMess · Shadowsocks · Trojan', description:'Ülke seçin veya global abonelikleri kullanın. Karta tıklayınca kopyalanır.', configsTab:'Al', howtoTab:'Kullanım', contactTab:'İletişim', selectCountry:'Ülke seç', countryLabel:'Ülke', getBtns:'Al', noConfigs:'Bulunamadı.', error:'Alma hatası.', copied:'Bağlantı kopyalandı.', globalHeading:'Global abonelikler', globalHint:'Çoğu istemcide çalışır.', howtoHeading:'Hızlı içe aktarma', howtoSteps:['Bağlantıyı kopyalayın.','İstemciyi açın.','Subscriptions → Add → yapıştır → Update.'], contactText:'GitHub veya e‑posta.', star:'Yıldız', releases:'Sürümler', updated:'Güncellendi', speed:'Hız testi', speedReady:'Çevrimiçi', speedOffline:'Çevrimdışı', btnCopy:'Kopya', btnOpen:'Aç' },
      nl: { title:'ConfigForge V2Ray', kicker:'Snelheid-geteste abonnementen · VLESS · VMess · Shadowsocks · Trojan', description:'Kies een land of gebruik globale abonnementen. Klik om te kopiëren.', configsTab:'Ophalen', howtoTab:'Handleiding', contactTab:'Contact', selectCountry:'Land kiezen', countryLabel:'Land', getBtns:'Ophalen', noConfigs:'Geen configs gevonden.', error:'Fout bij ophalen.', copied:'Link gekopieerd.', globalHeading:'Globale abonnementen', globalHint:'Werkt in de meeste clients.', howtoHeading:'Snel importeren', howtoSteps:['Kopieer de link.','Open de client.','Subscriptions → Add → plak URL → Update.'], contactText:'Contact via GitHub of mail.', star:'Ster', releases:'Releases', updated:'Bijgewerkt', speed:'Snelheidstest', speedReady:'Online', speedOffline:'Offline', btnCopy:'Kopiëren', btnOpen:'Openen' }
    };

    const prefersLang = (localStorage.getItem('cfg-lang') || navigator.language.substring(0,2) || 'en');
    let currentLang = translations[prefersLang] ? prefersLang : 'en';

    function t(key){ return (translations[currentLang] && translations[currentLang][key]) || translations['en'][key] || key; }
    function setText(id, text){ const el = document.getElementById(id); if(el) el.textContent = text; }
    function setHTML(id, html){ const el = document.getElementById(id); if(el) el.innerHTML = html; }

    function updateLanguage(lang){
      currentLang = translations[lang] ? lang : 'en';
      localStorage.setItem('cfg-lang', currentLang);
      document.documentElement.lang = currentLang;
      document.documentElement.dir = ['fa','ar'].includes(currentLang) ? 'rtl' : 'ltr';
      setText('title', t('title'));
      setText('kicker', t('kicker'));
      setText('configs-tab', t('configsTab'));
      setText('howto-tab', t('howtoTab'));
      setText('contact-tab', t('contactTab'));
      setText('country-label', t('countryLabel'));
      document.querySelector('#country-select').options[0].textContent = t('selectCountry');
      setText('get-configs', t('getBtns'));
      setText('global-heading', t('globalHeading'));
      setText('global-hint', t('globalHint'));
      setText('howto-heading', t('howtoHeading'));
      setText('description', t('description'));
      setText('contact-text', t('contactText'));

      // badge small labels
      document.querySelector('[data-i18n="star"]').textContent = t('star');
      document.querySelector('[data-i18n="releases"]').textContent = t('releases');
      document.querySelector('#last-updated b').textContent = t('updated');
      document.querySelector('#speed-label').textContent = t('speed');

      // steps
      const steps = translations[currentLang].howtoSteps || translations['en'].howtoSteps;
      const ol = document.getElementById('howto-steps');
      if(ol){ ol.innerHTML = steps.map(s=>`<li>${s}</li>`).join(''); }

      // re-render emojis for flags
      twemoji.parse(document.body);
    }

    // init language
    updateLanguage(currentLang);
    document.getElementById('language-select').value = currentLang;
    document.getElementById('language-select').addEventListener('change', e=> updateLanguage(e.target.value));

    // Toast helper
    const toastEl = document.getElementById('toast');
    const toastBody = document.getElementById('toast-body');
    let bsToast = null;
    function showToast(msg){
      toastBody.textContent = msg;
      if(!bsToast){ bsToast = new bootstrap.Toast(toastEl, { delay: 1800 }); }
      bsToast.show();
    }

    // Utilities
    const CONFIG_ROOT = 'https://raw.githubusercontent.com/ShatakVPN/ConfigForge-V2Ray/main/configs';
    const FILES = ['all.txt','light.txt','vless.txt','vmess.txt','shadowsocks.txt','trojan.txt','unknown.txt'];

    async function headExists(url){ try { const r = await fetch(url, { method:'HEAD', cache:'no-store' }); return r.ok; } catch { return false; } }

    function makeCard(label, url){
      const div = document.createElement('div');
      div.className = 'config-card card-lite';
      div.tabIndex = 0; // keyboard accessible
      // Buttons use fixed-width .label to avoid layout shift when language changes
      div.innerHTML = `<div class="d-flex align-items-center justify-content-between gap-2">
        <span class="text-truncate" title="${label}">${label}</span>
        <div class="btn-group btn-group-sm">
          <button class="btn btn-ghost btn-sm btn-icon" data-action="copy" aria-label="${t('btnCopy')}"><span class="ico">📋</span><span class="label">${t('btnCopy')}</span></button>
          <a class="btn btn-ghost btn-sm btn-icon" href="${url}" target="_blank" rel="noopener" aria-label="${t('btnOpen')}"><span class="ico">🔗</span><span class="label">${t('btnOpen')}</span></a>
        </div>
      </div>`;
      div.addEventListener('click', (e)=>{
        const target = e.target.closest('[data-action="copy"]');
        if(target){
          navigator.clipboard.writeText(url).then(()=> showToast(t('copied')));
        }
      });
      div.addEventListener('keyup', (e)=>{ if(e.key === 'Enter'){ navigator.clipboard.writeText(url).then(()=> showToast(t('copied'))); }});
      return div;
    }

    async function populateGlobal(){
      const wrap = document.getElementById('global-list');
      wrap.innerHTML = '<div class="loading-spinner">⏳</div>';
      const urls = FILES.map(f => [f, `${CONFIG_ROOT}/${f}`]);
      const checks = await Promise.all(urls.map(([,u])=> headExists(u)));
      wrap.innerHTML = '';
      urls.forEach(([f,u], i)=>{ if(checks[i]) wrap.appendChild(makeCard(f, u)); });
      // update speed badge: online if at least one file is present globally
      const ok = checks.some(Boolean);
      const dot = document.getElementById('speed-dot');
      dot.style.background = ok ? 'var(--ok)' : 'var(--err)';
      document.getElementById('speed-label').textContent = t('speed') + ' · ' + (ok ? t('speedReady') : t('speedOffline'));
    }

    async function populateCountry(country){
      const list = document.getElementById('configs-list');
      list.innerHTML = '<div class="loading-spinner">⏳</div>';
      const urls = FILES.map(f => [f, `${CONFIG_ROOT}/${country}/${f}`]);
      const checks = await Promise.all(urls.map(([,u])=> headExists(u)));
      list.innerHTML = '';
      const any = checks.some(Boolean);
      if(!any){ list.innerHTML = `<p class="error-message">${t('noConfigs')}</p>`; return; }
      urls.forEach(([f,u], i)=>{ if(checks[i]) list.appendChild(makeCard(f, u)); });
    }

    // Country autodetect (best-effort)
    fetch('https://ipapi.co/json/').then(r=>r.json()).then(data=>{
      const code = (data.country_code||'').toLowerCase();
      const sel = document.getElementById('country-select');
      if(code && sel.querySelector(`option[value="${code}"]`)) sel.value = code;
    }).catch(()=>{});

    // Last updated indicator
    (async function(){
      try {
        // try HEAD global all.txt first
        let r = await fetch(`${CONFIG_ROOT}/all.txt`, { method:'HEAD', cache:'no-store' });
        if(!r.ok){ // fallback: GET to capture Date/Last-Modified
          r = await fetch(`${CONFIG_ROOT}/all.txt`, { cache:'no-store' });
        }
        const lm = r.headers.get('last-modified') || r.headers.get('date');
        if(lm){ document.getElementById('updated-when').textContent = ` ${new Date(lm).toUTCString()}`; }
      } catch {
        document.getElementById('updated-when').textContent = ' —';
      }
    })();

    // Populate global on load
    populateGlobal();

    // Deep-linking via query params (?lang=fa&country=de)
    (function(){
      const params = new URLSearchParams(location.search);
      const lang = params.get('lang');
      const country = params.get('country');
      if(lang) { updateLanguage(lang); document.getElementById('language-select').value = lang; }
      if(country) { const sel = document.getElementById('country-select'); if(sel.querySelector(`option[value="${country}"]`)) { sel.value = country; populateCountry(country); } }
    })();

    // Button handler
    document.getElementById('get-configs').addEventListener('click', ()=>{
      const country = document.getElementById('country-select').value;
      if(!country){ showToast(t('selectCountry')); return; }
      populateCountry(country);
    });

    // Particles (subtle)
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    resize();
    const particles = Array.from({length: 60}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.8+0.8, vx: (Math.random()-.5)*.35, vy: (Math.random()-.5)*.35, a: Math.random()*Math.PI*2 }));
    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(const p of particles){ p.x+=p.vx; p.y+=p.vy; p.a+=.01; if(p.x<0||p.x>canvas.width) p.vx*=-1; if(p.y<0||p.y>canvas.height) p.vy*=-1; ctx.fillStyle='rgba(255,255,255,.75)'; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); }
      requestAnimationFrame(tick);
    }
    tick();
    addEventListener('resize', resize);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
